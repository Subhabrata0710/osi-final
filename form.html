// ... (Rest of your HTML and CSS stays the same) ...

<script>
    const GOOGLE_SCRIPT_URL = 'YOUR_DEPLOYED_WEB_APP_URL'; // PASTE YOUR URL HERE

    form.onsubmit = function(e) {
        e.preventDefault();

        const name = document.getElementById('userName').value;
        const email = document.getElementById('userEmail').value;
        const phone = document.getElementById('userPhone').value;
        
        const selectedRadio = document.querySelector('input[name="cat"]:checked');
        const amountInInr = selectedRadio.getAttribute('data-price');
        const categoryLabel = selectedRadio.parentElement.querySelector('.cat-label').innerText;

        const options = {
            "key": "YOUR_RAZORPAY_KEY_ID", 
            "amount": amountInInr * 100,
            "currency": "INR",
            "name": "OSICON Kolkata 2026",
            "handler": function (response){
                // ON SUCCESS: Send data to Google Sheets
                saveToGoogleSheets(name, email, phone, categoryLabel, amountInInr, response.razorpay_payment_id);
            },
            "prefill": { "name": name, "email": email, "contact": phone },
            "theme": { "color": "#4f46e5" }
        };

        const rzp1 = new Razorpay(options);
        rzp1.open();
    };

    function saveToGoogleSheets(name, email, phone, category, amount, paymentId) {
        // Create form data to send
        const formData = new URLSearchParams();
        formData.append('name', name);
        formData.append('email', email);
        formData.append('phone', phone);
        formData.append('category', category);
        formData.append('amount', amount);
        formData.append('payment_id', paymentId);

        fetch(GOOGLE_SCRIPT_URL, {
            method: 'POST',
            mode: 'no-cors', // Important for Google Script
            body: formData
        })
        .then(() => {
            alert("Registration Successful! Your details have been recorded.");
            window.location.reload(); 
        })
        .catch(error => console.error('Error!', error.message));
    }
</script>
